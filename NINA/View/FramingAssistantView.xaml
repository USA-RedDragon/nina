<UserControl
    x:Class="NINA.View.FramingAssistantView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:NINA.View"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ninactrl="clr-namespace:NINACustomControlLibrary;assembly=NINACustomControlLibrary"
    xmlns:ns="clr-namespace:NINA.Locale"
    d:DesignHeight="300"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>
        <StackPanel Orientation="Vertical">
            <TextBox Text="{Binding FieldOfView}" />
            <TextBox Text="{Binding CameraWidth}" />
            <TextBox Text="{Binding CameraHeight}" />
            <TextBox Text="{Binding CameraPixelSize}" />
            <TextBox Text="{Binding FocalLength}" />
            <Slider
                Maximum="360"
                Minimum="0"
                TickFrequency="5" IsSnapToTickEnabled="True"
                Value="{Binding Rectangle.Rotation, FallbackValue=0}" />
            <StackPanel DataContext="{Binding Coordinates}" Orientation="Vertical">
                <TextBlock Text="{Binding RAString}" />
                <TextBlock Text="{Binding DecString}" />
            </StackPanel>
            <ninactrl:CancellableButton
                Grid.Column="0"
                Width="100"
                Height="30"
                ButtonText="{ns:Loc LblDownload}"
                CancelButtonImage="{StaticResource CancelSVG}"
                CancelCommand="{Binding CancelLoadImageCommand}"
                Command="{Binding LoadImageCommand}" />
        </StackPanel>

        <GridSplitter
            Grid.Column="1"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch" />

        <Grid Grid.Column="2">
            <ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Canvas Width="{Binding ActualWidth, ElementName=PART_Image}" Height="{Binding ActualHeight, ElementName=PART_Image}">
                    <Canvas.Background>
                        <VisualBrush>
                            <VisualBrush.Visual>
                                <Image
                                    x:Name="PART_Image"
                                    Source="{Binding Image, IsAsync=True}"
                                    Stretch="Uniform" />
                            </VisualBrush.Visual>
                        </VisualBrush>
                    </Canvas.Background>
                    <Rectangle
                        Canvas.Left="{Binding X}"
                        Canvas.Top="{Binding Y}"
                        Width="{Binding Width}"
                        Height="{Binding Height}"
                        DataContext="{Binding Rectangle}"
                        RenderTransformOrigin="0.5,0.5"
                        Stroke="Red"
                        StrokeThickness="5">
                        <Rectangle.RenderTransform>
                            <RotateTransform Angle="{Binding Rotation}" />
                        </Rectangle.RenderTransform>
                    </Rectangle>

                    <Canvas.LayoutTransform>
                        <ScaleTransform
                            CenterX="0.5"
                            CenterY="0.5"
                            ScaleX="0.5"
                            ScaleY="0.5" />
                    </Canvas.LayoutTransform>
                </Canvas>
            </ScrollViewer>


            <!--<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Canvas
                    Width="1000"
                    Height="1000"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">

                    <Image Source="{Binding Image}" Stretch="Uniform" />
                    <Rectangle
                        Canvas.Left="{Binding X}"
                        Canvas.Top="{Binding Y}"
                        Width="{Binding Width}"
                        Height="{Binding Height}"
                        DataContext="{Binding Rectangle}"
                        Stroke="Red"
                        StrokeThickness="5" />
                </Canvas>
            </ScrollViewer>-->
        </Grid>
    </Grid>
</UserControl>
