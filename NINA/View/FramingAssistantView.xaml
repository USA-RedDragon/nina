<UserControl
    x:Class="NINA.View.FramingAssistantView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:behaviors="clr-namespace:NINA.Utility.Behaviors"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/expression/2010/interactivity"
    xmlns:local="clr-namespace:NINA.View"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:ninactrl="clr-namespace:NINACustomControlLibrary;assembly=NINACustomControlLibrary"
    xmlns:ns="clr-namespace:NINA.Locale"
    d:DesignHeight="300"
    d:DesignWidth="300"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="5" />
            <ColumnDefinition Width="3*" />
        </Grid.ColumnDefinitions>
        <StackPanel Orientation="Vertical">
            <StackPanel DataContext="{Binding Coordinates}" Orientation="Vertical">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblRA}" />
                    <TextBlock Margin="5,0,0,0" Text="{Binding RAString}" />
                </UniformGrid>
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblDec}" />
                    <TextBlock Margin="5,0,0,0" Text="{Binding DecString}" />
                </UniformGrid>
            </StackPanel>

            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblFieldOfView}" />
                    <TextBox Margin="5,0,0,0" Text="{Binding FieldOfView}" />
                </UniformGrid>
            </Border>
            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblWidth}" />
                    <TextBox Margin="5,0,0,0" Text="{Binding CameraWidth}" />
                </UniformGrid>
            </Border>
            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblHeight}" />
                    <TextBox Margin="5,0,0,0" Text="{Binding CameraHeight}" />
                </UniformGrid>
            </Border>
            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblPixelSize}" />
                    <TextBox Margin="5,0,0,0" Text="{Binding CameraPixelSize}" />
                </UniformGrid>
            </Border>
            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblFocalLength}" />
                    <TextBox Margin="5,0,0,0" Text="{Binding FocalLength}" />
                </UniformGrid>
            </Border>
            <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0,0,0,1">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblRotation}" />
                    <Slider
                        Margin="5,0,0,0"
                        IsSnapToTickEnabled="True"
                        Maximum="360"
                        Minimum="0"
                        TickFrequency="5"
                        Value="{Binding Rectangle.Rotation, FallbackValue=0}" />
                </UniformGrid>
            </Border>


            <ninactrl:CancellableButton
                Grid.Column="0"
                Width="100"
                Height="30"
                ButtonText="{ns:Loc LblDownload}"
                CancelButtonImage="{StaticResource CancelSVG}"
                CancelCommand="{Binding CancelLoadImageCommand}"
                Command="{Binding LoadImageCommand}" />

            <StackPanel DataContext="{Binding SelectedCoordinates}" Orientation="Vertical">
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblRA}" />
                    <TextBlock Margin="5,0,0,0" Text="{Binding RAString}" />
                </UniformGrid>
                <UniformGrid Columns="2">
                    <TextBlock VerticalAlignment="Center" Text="{ns:Loc LblDec}" />
                    <TextBlock Margin="5,0,0,0" Text="{Binding DecString}" />
                </UniformGrid>
            </StackPanel>

            <Button
                Width="30"
                Height="30"
                Command="{Binding ApplyCommand}" />
        </StackPanel>

        <GridSplitter
            Grid.Column="1"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch" />

        <Grid Grid.Column="2">
            <!--<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">-->
            <Viewbox Stretch="Uniform">
                <Canvas
                    Width="{Binding ActualWidth, ElementName=PART_Image}"
                    Height="{Binding ActualHeight, ElementName=PART_Image}"
                    ClipToBounds="True">
                    <Canvas.Background>
                        <VisualBrush>
                            <VisualBrush.Visual>
                                <Image
                                    x:Name="PART_Image"
                                    Source="{Binding Image, IsAsync=True}"
                                    Stretch="Uniform" />
                            </VisualBrush.Visual>
                        </VisualBrush>
                    </Canvas.Background>
                    <Rectangle
                        Canvas.Left="{Binding Rectangle.X}"
                        Canvas.Top="{Binding Rectangle.Y}"
                        Width="{Binding Rectangle.Width}"
                        Height="{Binding Rectangle.Height}"
                        behaviors:DragCommandBehavior.Drag="True"
                        behaviors:DragCommandBehavior.DragMoveCommand="{Binding DragMoveCommand}"
                        behaviors:DragCommandBehavior.DragStartCommand="{Binding DragStartCommand}"
                        behaviors:DragCommandBehavior.DragStopCommand="{Binding DragStopCommand}"
                        RenderTransformOrigin="0.5,0.5"
                        Stroke="{StaticResource ButtonForegroundBrush}"
                        StrokeThickness="5">
                        <Rectangle.Fill>
                            <SolidColorBrush Opacity=".25" Color="{Binding Path=Color, Source={StaticResource SecondaryBrush}}" />
                        </Rectangle.Fill>
                        <Rectangle.RenderTransform>
                            <RotateTransform Angle="{Binding Rectangle.Rotation}" />
                        </Rectangle.RenderTransform>
                    </Rectangle>
                    <!--<StackPanel
                        Canvas.Left="{Binding Rectangle.X}"
                        Canvas.Top="{Binding Rectangle.Y}"
                        Margin="10,10,0,0"
                        Orientation="Horizontal">
                        <TextBlock Text="{Binding CameraWidth}" />
                        <TextBlock Text="x" />
                        <TextBlock Text="{Binding CameraHeight}" />
                    </StackPanel>-->
                </Canvas>
            </Viewbox>
            <!--</ScrollViewer>-->


            <!--<ScrollViewer HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Auto">
                <Canvas
                    Width="1000"
                    Height="1000"
                    HorizontalAlignment="Stretch"
                    VerticalAlignment="Stretch">

                    <Image Source="{Binding Image}" Stretch="Uniform" />
                    <Rectangle
                        Canvas.Left="{Binding X}"
                        Canvas.Top="{Binding Y}"
                        Width="{Binding Width}"
                        Height="{Binding Height}"
                        DataContext="{Binding Rectangle}"
                        Stroke="Red"
                        StrokeThickness="5" />
                </Canvas>
            </ScrollViewer>-->
        </Grid>
    </Grid>
</UserControl>
