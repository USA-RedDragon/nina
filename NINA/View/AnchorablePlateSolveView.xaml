<UserControl x:Class="NINA.View.AnchorablePlateSolveView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:NINA.View"
             mc:Ignorable="d" 
             xmlns:ninactrl="clr-namespace:NINACustomControlLibrary;assembly=NINACustomControlLibrary"
             d:DesignHeight="300" d:DesignWidth="300">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto" x:Name="grid">
        <Grid IsEnabled="{Binding Cam, Converter={StaticResource InverseNullToBooleanConverter}}" >
            <Grid  IsEnabled="{Binding Cam.Connected}" >
                <StackPanel Orientation="Vertical">
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Center RA</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.Ra, StringFormat=\{0:#.000\}}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Center RA hms</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.RaString}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Center Dec</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.Dec, StringFormat=\{0:#.000\}}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Center Dec dms</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.DecString}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Radius</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.Radius, StringFormat=\{0:#.000 deg\}}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Pixel scale</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.Pixscale, StringFormat=\{0:#.00 arcsec/pixel\}}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" VerticalAlignment="Center" >
                            <TextBlock>Orientation</TextBlock>
                            <TextBlock Text="{Binding PlateSolveResult.Orientation, StringFormat=\{0:#.00\}}" Margin="5,0,0,0" />
                        </UniformGrid>
                    </Border>


                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                    </Border>

                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" >
                            <TextBlock Text="Sync" VerticalAlignment="Center"></TextBlock>
                            <CheckBox IsChecked="{Binding SyncScope}" Width="75" Height="25" HorizontalAlignment="Left"  Margin="5,0,0,0"/>
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="30">
                        <UniformGrid Columns="2" >
                            <TextBlock Text="Reslew to Target" VerticalAlignment="Center"></TextBlock>
                            <CheckBox IsChecked="{Binding SlewToTarget}" Width="75" Height="25" HorizontalAlignment="Left"  Margin="5,0,0,0"/>
                        </UniformGrid>
                    </Border>
                    <Border BorderBrush="{StaticResource BorderBrush}" BorderThickness="0 0 0 1" MinHeight="60">
                        <UniformGrid Rows="2">
                            <UniformGrid Columns="2" >
                                <TextBlock Text="Repeat until" VerticalAlignment="Center"></TextBlock>
                                <CheckBox IsChecked="{Binding Repeat}" Width="75" Height="25" HorizontalAlignment="Left"  Margin="5,0,0,0"/>
                            </UniformGrid>                    
                            <UniformGrid Columns="2" IsEnabled="{Binding Repeat}">
                                <TextBlock Text="error &lt;" VerticalAlignment="Center"></TextBlock>
                                <UniformGrid Columns="2">                                
                                    <TextBox Text="{Binding RepeatThreshold}" HorizontalAlignment="Stretch" VerticalAlignment="Center" Margin="5,0,0,0" />
                                    <TextBlock Text="arcmin" VerticalAlignment="Center"></TextBlock>
                                </UniformGrid>
                            </UniformGrid>
                        </UniformGrid>
                    </Border>

                    <local:CameraControlView          
                                    MyOrientation="Vertical"
                                    MyBinningModes="{Binding Source={StaticResource AppVM}, Path=CameraVM.Cam.BinningModes}"
                                    MyFilters="{Binding Source={StaticResource AppVM}, Path=FilterWheelVM.FW.Filters}"
                                    MySelectedBinningMode="{Binding SnapBin, Mode=TwoWay}"
                                    MySelectedFilter="{Binding SnapFilter, Mode=TwoWay}"
                                    MyExposureDuration="{Binding SnapExposureDuration, Mode=TwoWay}" />

                    <ninactrl:CancellableButton 
                        Height="35" Margin="10,10,10,0" 
                        Command="{Binding SolveCommand}" 
                        CancelCommand="{Binding CancelSolveCommand}" 
                        ButtonImage="{StaticResource PlaySVG}" 
                        CancelButtonImage="{StaticResource CancelSVG}" 
                        ToolTip="Capture image and platesolve"
                        />

                    <DataGrid ItemsSource="{Binding PlateSolveResultList}" AutoGenerateColumns="False"  CanUserAddRows="False" Width="{Binding ElementName=grid, Path=ActualWidth}">
                        <DataGrid.Columns>
                            <DataGridTextColumn Width="*" Header="Success" Binding="{Binding Success}" IsReadOnly="True" />
                            <DataGridTextColumn Width="*" Header="Ra" Binding="{Binding RaString}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Dec" Binding="{Binding DecString}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Ra Error" Binding="{Binding RaErrorString}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Dec Error" Binding="{Binding DecErrorString}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Ra Pix Error" Binding="{Binding RaPixError, StringFormat=\{0:#.00\}}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Dec Pix Error" Binding="{Binding DecPixError, StringFormat=\{0:#.00\}}" IsReadOnly="True"/>
                            <DataGridTextColumn Width="*" Header="Orientation" Binding="{Binding Orientation, StringFormat=\{0:#.00\}}" IsReadOnly="True"/>
                        </DataGrid.Columns>
                    </DataGrid>

                </StackPanel>          
            </Grid>
        </Grid>
    </ScrollViewer>
</UserControl>
